/*! skrollr v0.4.6 https://github.com/Prinzhorn/skrollr | free to use under terms of MIT license */

(function(a,b,c){function K(c){_=this,c=c||{},bh=c.constants||{};if(c.easing)for(var d in c.easing)J[d]=c.easing[d];bc={beforerender:c.beforerender,render:c.render},bd=c.forceHeight!==!1,bo=a.skrollrScrollerInstance,bd&&(bg=c.scale||1),W(e,[j],[k]);if(bd){var g=b.createElement("div"),h=g.style;h.width="1px",h.position="absolute",h.right=h.top=h.zIndex="0",f.appendChild(g),bf=function(){h.height=be+e.clientHeight+"px",L()}}else bf=function(){be=f.scrollHeight-e.clientHeight,L(),bm=!0};return _.refresh(),V("resize",bf),N(),_}"use strict";var d=Object.prototype.hasOwnProperty,e=b.documentElement,f=b.body,g="rendered",h="un"+g,i="skrollable",j="skrollr",k="no-"+j,l="linear",m=1e3,n="start",o="end",p="top",q="center",r="bottom",s="___has_rendered_class",t="___skrollable_id",u=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/30)},v=/^\s*(.+)\s*$/m,w=/^data(?:-(_\w+))?(?:-?(-?\d+))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,x=/:|;/g,y=/^([a-z\-]+)\[(\w+)\]$/,z=/-([a-z])/g,A=function(a,b){return b.toUpperCase()},B=/(:?\+|-)?[\d.]+/g,C=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,D=/[a-z\-]+-gradient/g,E=/^O|Moz|webkit|ms/,F,G;if(a.getComputedStyle){var H=a.getComputedStyle(f,null);for(var I in H){F=I.match(E)||+I==I&&H[I].match(E);if(F)break}}F=(F||[""])[0],G="-"+F.toLowerCase()+"-",E=c;var J={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5},sqrt:function(a){return Math.sqrt(a)},bounce:function(a){var b;if(a<=.5083)b=3;else if(a<=.8489)b=9;else if(a<=.96208)b=27;else if(a<=.99981)b=91;else return 1;return 1-Math.abs(3*Math.cos(a*b*1.028)/b)}};K.prototype.refresh=function(a){var d,e=!1;a===c?(e=!0,bb=[],bn=0,a=b.getElementsByTagName("*")):a=[].concat(a);for(d=0;d<a.length;d++){var f=a[d],j=f,k=[];if(!f.attributes)continue;for(var l=0;l<f.attributes.length;l++){var m=f.attributes[l];if(m.name==="data-anchor-target"){j=b.querySelector(m.value);if(j===null)throw'Unable to find anchor target "'+m.value+'"';continue}var p=m.name.match(w);if(p!==null){var q=p[1];q=q&&bh[q.substr(1)]||0;var r=(p[2]|0)*bg+q,s=p[3],u=p[4]||s,v={offset:r,props:m.value,element:f};k.push(v),!s||s===n||s===o?(v.mode="absolute",s===o?v.isEnd=!0:(v.frame=r,delete v.offset,v.frame>be&&(be=v.frame))):(v.mode="relative",v.anchors=[s,u])}}if(k.length){var x;!e&&t in f?x=f[t]:x=f[t]=bn++,bb[x]={element:f,anchorTarget:j,keyFrames:k},W(f,[i,h],[g])}}bf();for(d=0;d<a.length;d++){var y=bb[a[d][t]];if(y===c)continue;y.keyFrames.sort($),O(y),Q(y)}return _},K.prototype.relativeToAbsolute=function(a,b,c){var d=e.clientHeight,f=a.getBoundingClientRect(),g=f.top;return b===r?g-=d:b===q&&(g-=d/2),c===r?g+=f.height:c===q&&(g+=f.height/2),g+=_.getScrollTop(),g+.5|0},K.prototype.animateTo=function(a,b){b=b||{};var d=Z(),e=_.getScrollTop();return bl={startTop:e,topDiff:a-e,targetTop:a,duration:b.duration||m,startTime:d,endTime:d+(b.duration||m),easing:J[b.easing||l],done:b.done},bl.topDiff||(bl.done&&bl.done.call(_),bl=c),_},K.prototype.isAnimatingTo=function(){return!!bl},K.prototype.setScrollTop=function(b){return(bo||a).scrollTo(0,b),_},K.prototype.getScrollTop=function(){return bo?bo.__scrollTop:a.pageYOffset||e.scrollTop||f.scrollTop||0},K.prototype.on=function(a,b){return bc[a]=b,_},K.prototype.off=function(a){return delete bc[a],_};var L=function(){for(var a=0;a<bb.length;a++){var b=bb[a],c=b.anchorTarget,d=b.keyFrames;for(var e=0;e<d.length;e++){var f=d[e];f.mode==="relative"?f.frame=_.relativeToAbsolute(c,f.anchors[0],f.anchors[1])-f.offset:f.isEnd&&(f.frame=be-f.offset)}}},M=function(a){for(var b=0;b<bb.length;b++){var c=bb[b],e=c.keyFrames,f=e[0].frame,i=e[e.length-1].frame,j=a<=f,k=a>=i,l,m;if(j||k){var n=e[j?0:e.length-1].props;for(l in n)d.call(n,l)&&(m=T(n[l].value),U(c.element,l,m));c[s]&&(a<f||a>i)&&(W(c.element,[h],[g]),c[s]=!1);continue}c[s]||(W(c.element,[g],[h]),c[s]=!0);for(var o=0;o<e.length-1;o++)if(a>=e[o].frame&&a<=e[o+1].frame){var p=e[o],q=e[o+1];for(l in p.props)if(d.call(p.props,l)){var r=(a-p.frame)/(q.frame-p.frame);r=p.props[l].easing(r),m=S(p.props[l].value,q.props[l].value,r),m=T(m),U(c.element,l,m)}break}}},N=function(){var a;if(bl){var b=Z();if(b>=bl.endTime)_.setScrollTop(bl.targetTop),a=bl.done,bl=c;else{var d=bl.easing((b-bl.startTime)/bl.duration);_.setScrollTop(bl.startTop+d*bl.topDiff|0)}}bk=_.getScrollTop(),bk<0&&(bk=0);if(bm||bj!==bk){bi=bk>=bj?"down":"up",bm=!1;var e={curTop:bk,lastTop:bj,maxTop:be,direction:bi},f=bc.beforerender&&bc.beforerender.call(_,e);f!==!1&&(M(bk),bj=bk,bc.render&&bc.render.call(_,e)),a&&a.call(_)}u(function(){N()})},O=function(a){for(var b=0;b<a.keyFrames.length;b++){var c=a.keyFrames[b],d=c.props.split(x),e,f,g;c.props={};for(var h=0;h<d.length-1;h+=2)e=X(d[h]),f=X(d[h+1]),g=e.match(y),g!==null?(e=g[1],g=g[2]):g=l,f=f.indexOf("!")?P(f):[f.slice(1)],c.props[e]={value:f,easing:J[g]}}},P=function(a){var b=[];return C.lastIndex=0,a=a.replace(C,function(a){return a.replace(B,function(a){return a/255*100+"%"})}),D.lastIndex=0,a=a.replace(D,function(a){return G+a}),a=a.replace(B,function(a){return b.push(+a),"?"}),b.unshift(a),b},Q=function(a){var b={},c;for(c=0;c<a.keyFrames.length;c++)R(a.keyFrames[c],b);b={};for(c=a.keyFrames.length-1;c>=0;c--)R(a.keyFrames[c],b)},R=function(a,b){var c;for(c in b)d.call(a.props,c)||(a.props[c]=b[c]);for(c in a.props)b[c]=a.props[c]},S=function(a,b,c){if(a.length!==b.length)throw"Can't interpolate between \""+a[0]+'" and "'+b[0]+'"';var d=[a[0]];for(var e=1;e<a.length;e++)d[e]=a[e]+(b[e]-a[e])*c;return d},T=function(a){var b=1;return a[0].replace(/\?/g,function(){return a[b++]})},U=function(a,b,c){var d=a.style;b=b.replace(z,A).replace("-","");if(b==="zIndex")d[b]=""+(c|0);else try{d[F+b.slice(0,1).toUpperCase()+b.slice(1)]=c,d[b]=c}catch(e){}if(ba.setStyle)for(var f=0;f<ba.setStyle.length;f++)ba.setStyle[f].call(_,a,b,c)},V=function(b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},W=function(b,c,d){var e="className";a.SVGElement&&b instanceof a.SVGElement&&(b=b[e],e="baseVal");var f=b[e];for(var g=0;g<c.length;g++)Y(f).indexOf(Y(c[g]))===-1&&(f+=" "+c[g]);for(var h=0;h<d.length;h++)f=Y(f).replace(Y(d[h])," ");b[e]=X(f)},X=function(a){return a.replace(v,"$1")},Y=function(a){return" "+a+" "},Z=function(){return+(new Date)},$=function(a,b){return a.frame-b.frame},_,ba={},bb=[],bc,bd,be=0,bf,bg=1,bh,bi="down",bj=-1,bk=0,bl,bm,bn=0,bo;a.skrollr={init:function(a){return _||new K(a)},plugin:function(a,b){ba[a]?ba[a].push(b):ba[a]=[b]},VERSION:"0.4.6"}})(window,document);