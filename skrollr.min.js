/*! skrollr v0.4.0 https://github.com/Prinzhorn/skrollr | free to use under terms of MIT license */(function(a,b,c){function G(a){Y=this,a=a||{};if(a.easing)for(var e in a.easing)F[e]=a.easing[e];bb={beforerender:a.beforerender||d,render:a.render||d},cb=a.forceHeight!==!1,cb&&(eb=a.scale||1);var h=b.getElementsByTagName("*");for(var i=0;i<h.length;i++){var k=h[i],l=[];if(!k.attributes)continue;for(var o=0;o<k.attributes.length;o++){var p=k.attributes[o],q=p.name.match(t);if(q!==null){var r=(q[1]|0)*eb,s=q[2],u=q[3]||s,v={offset:r,props:p.value,element:k};l.push(v),s===c||s===m||s===n?s===n?_.push(v):(v.frame=r,delete v.offset,r>db&&(db=r)):(v.anchors=[s,u],ab.push(v))}}l.length&&($.push({element:k,keyFrames:l}),R(k,j))}var w=function(){var a;for(a=0;a<_.length;a++){var b=_[a];b.frame=db-b.offset}for(a=0;a<ab.length;a++){var b=ab[a];b.frame=H(b.element,b.anchors[0],b.anchors[1])-b.offset}},x;if(cb){var y=b.createElement("div"),z=y.style;z.width="1px",z.position="absolute",z.right=z.top=z.zIndex="0",g.appendChild(y),x=function(){z.height=db+f.clientHeight+"px",w()}}else x=function(){db=g.scrollHeight-f.clientHeight,w(),jb=!0};S("resize",x),x();for(var i=0;i<$.length;i++){var A=$[i];A.keyFrames.sort(X),K(A),M(A)}return h=a=c,J(),Y}"use strict";var d=function(){},e=Object.prototype.hasOwnProperty,f=b.documentElement,g=b.body,h="unrendered",i="rendered",j="skrollable",k="linear",l=1e3,m="start",n="end",o="top",p="center",q="bottom",r=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/30)},s=/^\s*(.*)\s$/,t=/^data-(-?\d+)?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,u=/:|;/g,v=/^([a-z\-]+)\[(\w+)\]$/,w=/-([a-z])/g,x=/(:?\+|-)?[\d.]+/g,y=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,z=/[a-z\-]+-gradient/g,A=/^O|Moz|webkit|ms/,B,C;if(a.getComputedStyle){var D=a.getComputedStyle(g,null);for(var E in D){B=E.match(A)||+E==E&&D[E].match(A);if(B)break}}B=(B||[""])[0],C="-"+B.toLowerCase()+"-",A=c;var F={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5},bounce:function(a){var b;switch(!0){case a<=.5083:b=3;break;case a<=.8489:b=9;break;case a<=.96208:b=27;break;case a<=.99981:b=91;break;default:return 1}return 1-Math.abs(3*Math.cos(a*b*1.028)/b)}};G.prototype.animateTo=function(a,b){b=b||{};var e=W();ib={startTop:Y.getScrollTop(),topDiff:a-Y.getScrollTop(),targetTop:a,duration:b.duration||l,startTime:e,endTime:e+(b.duration||l),easing:F[b.easing||k],done:b.done||d},ib.topDiff||(ib.done.call(Y),ib=c)},G.prototype.setScrollTop=function(b){a.scroll(0,b)},G.prototype.getScrollTop=function(b){return a.pageYOffset||f.scrollTop||g.scrollTop||0},G.prototype.on=function(a,b){bb[a]=b||d},G.prototype.off=function(a){bb[a]=d};var H=function(a,b,c){var d=f.clientHeight,e=a.getBoundingClientRect(),g=e.top+.5|0;return b===o?g-=d:b===p&&(g-=d/2+.5|0),c===o?g+=e.height:c===p&&(g+=e.height/2+.5|0),g+=Y.getScrollTop(),g},I=function(a,b){var c=a.keyFrames,d=c[0].frame,f=c[c.length-1].frame,g=b<=d,j=b>=f;if(g||j){var k=c[g?0:c.length-1].props;for(var l in k)if(e.call(k,l)){var m=P(k[l].value);Q(a.element,l,m)}if(a.hasRenderedClass&&b<d||b>f)T(a.element,i),R(a.element,h);return}a.hasRenderedClass||(T(a.element,h),R(a.element,i));for(var n=0;n<c.length-1;n++)if(b>=c[n].frame&&b<=c[n+1].frame){var o=c[n],p=c[n+1];for(var l in o.props)if(e.call(o.props,l)){var q=(b-o.frame)/(p.frame-o.frame);q=o.props[l].easing(q);var m=O(o.props[l].value,p.props[l].value,q);m=P(m),Q(a.element,l,m)}break}},J=function(){var a=d;if(ib){var b=W();if(b>=ib.endTime)Y.setScrollTop(ib.targetTop),a=ib.done,ib=c;else{var e=ib.easing((b-ib.startTime)/ib.duration);Y.setScrollTop(ib.startTop+e*ib.topDiff|0)}}hb=Y.getScrollTop(),hb<0&&(hb=0);if(jb||gb!==hb){fb=hb>=gb?"down":"up",jb=!1;var f={curTop:hb,lastTop:gb,maxTop:db,direction:fb},g=bb.beforerender.call(Y,f);if(g!==!1){for(var h=0;h<$.length;h++)I($[h],hb);gb=hb,bb.render.call(Y,f)}a.call(Y)}r(function(){J()})},K=function(a){for(var b=0;b<a.keyFrames.length;b++){var c=a.keyFrames[b],d=c.props.split(u),e,f,g;c.props={};for(var h=0;h<d.length-1;h+=2)e=d[h],f=d[h+1],g=e.match(v),g!==null?(e=g[1],g=g[2]):g=k,f=f.indexOf("!")?L(f):[f.slice(1)],c.props[e]={value:f,easing:F[g]}}},L=function(a){var b=[];return y.lastIndex=0,a=a.replace(y,function(a){return a.replace(x,function(a){return a/255*100+"%"})}),z.lastIndex=0,a=a.replace(z,function(a){return C+a}),a=a.replace(x,function(a){return b.push(+a),"?"}),b.unshift(a),b},M=function(a){var b={};for(var c=0;c<a.keyFrames.length;c++)N(a.keyFrames[c],b);b={};for(var c=a.keyFrames.length-1;c>=0;c--)N(a.keyFrames[c],b)},N=function(a,b){for(var c in b)e.call(a.props,c)||(a.props[c]=b[c]);for(var c in a.props)b[c]=a.props[c]},O=function(a,b,c){if(a.length!==b.length)throw"Can't interpolate between \""+a[0]+'" and "'+b[0]+'"';var d=[a[0]];for(var e=1;e<a.length;e++)d[e]=a[e]+(b[e]-a[e])*c;return d},P=function(a){var b=1;return a[0].replace(/\?/g,function(){return a[b++]})},Q=function(a,b,c){a.id=="bacon"&&(console.log(b),console.log(c));var d=a.style;b=b.replace(w,function(a,b){return b.toUpperCase()}).replace("-","");if(b==="zIndex")d[b]=""+(c|0);else try{d[B+b.slice(0,1).toUpperCase()+b.slice(1)]=c,d[b]=c}catch(e){}if(Z.setStyle)for(var f=0;f<Z.setStyle.length;f++)Z.setStyle[0].call(this,a,b,c)},R=function(a,b){V(a.className).indexOf(V(b))===-1&&(a.className=U(a.className+" "+b))},S=function(b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},T=function(a,b){a.className=U(V(a.className).replace(V(b)," "))},U=function(a){return a.replace(s,"$1")},V=function(a){return" "+a+" "},W=function(){return+(new Date)},X=function(a,b){return a.frame-b.frame},Y,Z={},$=[],_=[],ab=[],bb,cb,db=0,eb=1,fb="down",gb=-1,hb=0,ib,jb;a.skrollr={init:function(a){return Y||new G(a)},plugin:function(a,b){Z[a]?Z[a].push(b):Z[a]=[b]},VERSION:"0.4.0"}})(window,document);