/*! skrollr v0.4.0 https://github.com/Prinzhorn/skrollr | free to use under terms of MIT license */(function(a,b,c){function G(a){X=this,a=a||{};if(a.easing)for(var d in a.easing)F[d]=a.easing[d];ab={beforerender:a.beforerender,render:a.render},bb=a.forceHeight!==!1,bb&&(db=a.scale||1);var h=b.getElementsByTagName("*");for(var j=0;j<h.length;j++){var k=h[j],n=[];if(!k.attributes)continue;for(var o=0;o<k.attributes.length;o++){var p=k.attributes[o],q=p.name.match(s);if(q!==null){var r=(q[1]|0)*db,t=q[2],u=q[3]||t,v={offset:r,props:p.value,element:k};n.push(v),t===c||t===l||t===m?t===m?$.push(v):(v.frame=r,delete v.offset,r>cb&&(cb=r)):(v.anchors=[t,u],_.push(v))}}n.length&&(Z.push({element:k,keyFrames:n}),S(k,[i,g],[]))}var w=function(){var a;for(a=0;a<$.length;a++){var b=$[a];b.frame=cb-b.offset}for(a=0;a<_.length;a++){var b=_[a];b.frame=H(b.element,b.anchors[0],b.anchors[1])-b.offset}},x;if(bb){var y=b.createElement("div"),z=y.style;z.width="1px",z.position="absolute",z.right=z.top=z.zIndex="0",f.appendChild(y),x=function(){z.height=cb+e.clientHeight+"px",w()}}else x=function(){cb=f.scrollHeight-e.clientHeight,w(),ib=!0};R("resize",x),x();for(var j=0;j<Z.length;j++){var A=Z[j];A.keyFrames.sort(W),K(A),M(A)}return h=a=c,J(),X}"use strict";var d=Object.prototype.hasOwnProperty,e=b.documentElement,f=b.body,g="unrendered",h="rendered",i="skrollable",j="linear",k=1e3,l="start",m="end",n="top",o="center",p="bottom",q=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/30)},r=/^\s*(.+)\s*$/m,s=/^data-(-?\d+)?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,t=/:|;/g,u=/^([a-z\-]+)\[(\w+)\]$/,v=/-([a-z])/g,w=function(a,b){return b.toUpperCase()},x=/(:?\+|-)?[\d.]+/g,y=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,z=/[a-z\-]+-gradient/g,A=/^O|Moz|webkit|ms/,B,C;if(a.getComputedStyle){var D=a.getComputedStyle(f,null);for(var E in D){B=E.match(A)||+E==E&&D[E].match(A);if(B)break}}B=(B||[""])[0],C="-"+B.toLowerCase()+"-",A=c;var F={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5},bounce:function(a){var b;switch(!0){case a<=.5083:b=3;break;case a<=.8489:b=9;break;case a<=.96208:b=27;break;case a<=.99981:b=91;break;default:return 1}return 1-Math.abs(3*Math.cos(a*b*1.028)/b)}};G.prototype.refresh=function(a){},G.prototype.animateTo=function(a,b){b=b||{};var d=V();hb={startTop:X.getScrollTop(),topDiff:a-X.getScrollTop(),targetTop:a,duration:b.duration||k,startTime:d,endTime:d+(b.duration||k),easing:F[b.easing||j],done:b.done},hb.topDiff||(hb.done&&hb.done.call(X),hb=c)},G.prototype.setScrollTop=function(b){a.scroll(0,b)},G.prototype.getScrollTop=function(b){return a.pageYOffset||e.scrollTop||f.scrollTop||0},G.prototype.on=function(a,b){ab[a]=b},G.prototype.off=function(a){delete ab[a]};var H=function(a,b,c){var d=e.clientHeight,f=a.getBoundingClientRect(),g=f.top+.5|0;return b===n?g-=d:b===o&&(g-=d/2+.5|0),c===n?g+=f.height:c===o&&(g+=f.height/2+.5|0),g+=X.getScrollTop(),g},I=function(a){for(var b=0;b<Z.length;b++){var c=Z[b],e=c.keyFrames,f=e[0].frame,i=e[e.length-1].frame,j=a<=f,k=a>=i;if(j||k){var l=e[j?0:e.length-1].props;for(var m in l)if(d.call(l,m)){var n=P(l[m].value);Q(c.element,m,n)}c._renderClass&&(a<f||a>i)&&(S(c.element,[g],[h]),c._renderClass=!1);continue}c._renderClass||(S(c.element,[h],[g]),c._renderClass=!0);for(var o=0;o<e.length-1;o++)if(a>=e[o].frame&&a<=e[o+1].frame){var p=e[o],q=e[o+1];for(var m in p.props)if(d.call(p.props,m)){var r=(a-p.frame)/(q.frame-p.frame);r=p.props[m].easing(r);var n=O(p.props[m].value,q.props[m].value,r);n=P(n),Q(c.element,m,n)}break}}},J=function(){var a;if(hb){var b=V();if(b>=hb.endTime)X.setScrollTop(hb.targetTop),a=hb.done,hb=c;else{var d=hb.easing((b-hb.startTime)/hb.duration);X.setScrollTop(hb.startTop+d*hb.topDiff|0)}}gb=X.getScrollTop(),gb<0&&(gb=0);if(ib||fb!==gb){eb=gb>=fb?"down":"up",ib=!1;var e={curTop:gb,lastTop:fb,maxTop:cb,direction:eb},f=ab.beforerender&&ab.beforerender.call(X,e);f!==!1&&(I(gb),fb=gb,ab.render&&ab.render.call(X,e)),a&&a.call(X)}q(function(){J()})},K=function(a){for(var b=0;b<a.keyFrames.length;b++){var c=a.keyFrames[b],d=c.props.split(t),e,f,g;c.props={};for(var h=0;h<d.length-1;h+=2)e=d[h],f=d[h+1],g=e.match(u),g!==null?(e=g[1],g=g[2]):g=j,f=f.indexOf("!")?L(f):[f.slice(1)],c.props[e]={value:f,easing:F[g]}}},L=function(a){var b=[];return y.lastIndex=0,a=a.replace(y,function(a){return a.replace(x,function(a){return a/255*100+"%"})}),z.lastIndex=0,a=a.replace(z,function(a){return C+a}),a=a.replace(x,function(a){return b.push(+a),"?"}),b.unshift(a),b},M=function(a){var b={};for(var c=0;c<a.keyFrames.length;c++)N(a.keyFrames[c],b);b={};for(var c=a.keyFrames.length-1;c>=0;c--)N(a.keyFrames[c],b)},N=function(a,b){for(var c in b)d.call(a.props,c)||(a.props[c]=b[c]);for(var c in a.props)b[c]=a.props[c]},O=function(a,b,c){if(a.length!==b.length)throw"Can't interpolate between \""+a[0]+'" and "'+b[0]+'"';var d=[a[0]];for(var e=1;e<a.length;e++)d[e]=a[e]+(b[e]-a[e])*c;return d},P=function(a){var b=1;return a[0].replace(/\?/g,function(){return a[b++]})},Q=function(a,b,c){var d=a.style;b=b.replace(v,w).replace("-","");if(b==="zIndex")d[b]=""+(c|0);else try{d[B+b.slice(0,1).toUpperCase()+b.slice(1)]=c,d[b]=c}catch(e){}if(Y.setStyle)for(var f=0;f<Y.setStyle.length;f++)Y.setStyle[0].call(X,a,b,c)},R=function(b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},S=function(b,c,d){var e="className";a.SVGElement&&b instanceof a.SVGElement&&(b=b[e],e="baseVal");var f=b[e],g;for(g=0;g<c.length;g++)U(f).indexOf(U(c[g]))===-1&&(f+=" "+c[g]);for(g=0;g<d.length;g++)f=U(f).replace(U(d[g])," ");b[e]=T(f)},T=function(a){return a.replace(r,"$1")},U=function(a){return" "+a+" "},V=function(){return+(new Date)},W=function(a,b){return a.frame-b.frame},X,Y={},Z=[],$=[],_=[],ab,bb,cb=0,db=1,eb="down",fb=-1,gb=0,hb,ib;a.skrollr={init:function(a){return X||new G(a)},plugin:function(a,b){Y[a]?Y[a].push(b):Y[a]=[b]},VERSION:"0.4.0"}})(window,document);