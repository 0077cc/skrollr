(function(a,b,c){function v(a){var c=this;a=a||{},c.easings=t;if(a.easing)for(var e in a.easing)c.easings[e]=a.easing[e];c.container=b.getElementsByTagName("body")[0],c.scale=a.scale||1,c.listeners={beforerender:a.beforerender||d,render:a.render||d},c.skrollables=[],c.maxKeyFrame=a.maxKeyFrame||0,c.dir="down",c.lastTop=-1,c.curTop=0;var f=b.getElementsByTagName("*"),g=[];for(var h=0;h<f.length;h++){var i=f[h],k={},l=[];for(var m=0;m<i.attributes.length;m++){var n=i.attributes[m],o=n.name.match(j);if(o!==null){var p,q;p=(o[2]|0)*c.scale,q={frame:p,props:n.value},l.push(q),o[1]==="-end"&&g.push(q),p>this.maxKeyFrame&&(c.maxKeyFrame=p)}}l.length&&(c.skrollables.push({element:i,keyFrames:l}),x(i,"skrollable"))}for(var h=0;h<g.length;h++){var q=g[h];q.frame=c.maxKeyFrame-q.frame}for(var h=0;h<c.skrollables.length;h++){var r=c.skrollables[h];r.keyFrames.sort(function(a,b){return a.frame-b.frame}),c._parseProps(r),c._fillProps(r)}var s=b.createElement("div"),u=s.style;return u.width="1px",u.height=c.maxKeyFrame+b.documentElement.clientHeight+"px",u.position="absolute",u.right=u.top=u.zIndex="0",c.container.appendChild(s),c._render(),s=null,u=null,g=null,c}var d=function(){},e=parseInt,f=parseFloat,g=Object.prototype.hasOwnProperty,h=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){setTimeout(a,1e3/30)},i=/^\s*(.*)\s$/,j=/^data(-end)?-?(\d+)?$/,k=/:|;/g,l=/^([a-z-]+)\[(\w+)\]$/,n=/-([a-z])/g,o=/(?:^|\s+)((?:-|\+)?[0-9.]+)(%|px|em|ex|pt|in|cm|mm|pc|deg)?/g,p=/((?:rotate)|(?:scale(?:X|Y)?)|(?:skew(?:X|Y)?))\((.+?)\)/g,q=/^((?:rgba?)|(?:hsla?))\(((?:-|\+)?\d+)\s*,\s*(\d{1,3})%?\s*,\s*(\d{1,3})%?\s*(?:,\s*([0-9.]+))?\)$/,r=!0;try{b.createElement("a").style.color="hsl(0,0%,0%)"}catch(s){r=!1}var t={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a*a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5},bounce:function(a,b){switch(!0){case a<=.5083:b=3;break;case a<=.8489:b=9;break;case a<=.96208:b=27;break;case a<=.99981:b=91;break;default:return 1}return 1-Math.abs(3*Math.cos(a*b*1.028)/b)}},u={constant:{step:function(a){return a}},numeric:{parser:function(a,b){o.lastIndex=0,b=o.exec(a);if(b===null)throw"Can't parse \""+a+'" as numeric value.';return[f(b[1],10),b[2]||""]},step:function(a,b,d){if(b===c)return a[0]+a[1];if(a[1]!==b[1])throw"Can't interpolate between '"+val[0]+a[1]+"' and '"+a[0]+b[1]+"'";return a[0]+(b[0]-a[0])*d+a[1]}},composedNumeric:{parser:function(a){var b=[];for(var c=0;c<a.length;c++)b.push(u.numeric.parser(a[c]));return b},step:function(a,b,d){var e=[];if(b===c)for(var f=0;f<a.length;f++)e.push(u.numeric.step(a[f]));else{if(a.length!==b.length)throw"Can't interpolate between two composed values with different number of values.";for(var f=0;f<a.length;f++)e.push(u.numeric.step(a[f],b[f],d))}return e.join(" ")}},transform:{parser:function(a,b,c){b=[];for(var d=0;d<a.length;d++)p.lastIndex=0,c=p.exec(a[d]),b.push(c[1]),b.push(u.numeric.parser(c[2]));return b},step:function(a,b,d,e){e=[];if(b===c)for(var f=0;f<a.length-1;f+=2)e.push(a[f]+"("+a[f+1].join("")+")");else for(var f=0;f<a.length-1;f+=2)e.push(a[f]+"("+u.numeric.step(a[f+1],b[f+1],d)+")");return e.join(" ")}},color:{parser:function(a){a.shift(),a[4]===c&&(a[4]=1),a[0].length===3&&(a[0]+="a"),a[1]=e(a[1],10),a[2]=e(a[2],10),a[3]=e(a[3],10),a[4]=f(a[4],10);var b="";return a[0]==="hsla"&&(b="%"),a[1]=[a[1],""],a[2]=[a[2],b],a[3]=[a[3],b],a[4]=[a[4],""],a},step:function(a,b,d){if(b===c)return u.color.toString(a);var g=[a[0]];for(var h=1;h<4;h++)g[h]=[e(u.numeric.step(a[h],b[h],d),10),a[h][1]];return g[4]=[f(u.numeric.step(a[4],b[4],d),10),a[4][1]],u.color.toString(g)},toString:function(a){if(!r)return a[0]==="hsla"?A(a[1][0],a[2][0],a[3][0]):B(a[1][0],a[2][0],a[3][0]);var b=a.slice(1);for(var c=0;c<4;c++)b[c]=b[c].join("");return a[0]+"("+b.join(",")+")"}}};v.prototype.setScrollTop=function(a){pageYOffset=a,b.body.scrollTop=a,b.documentElement.scrollTop=a},v.prototype.on=function(a,b){this.listeners[a]=b||d},v.prototype.off=function(a){this.listeners[a]=d},v.prototype._calcSteps=function(a,b){var c=a.keyFrames;if(b<c[0].frame)x(a.element,"hidden");else if(b>c[c.length-1].frame){y(a.element,"hidden");var d=c[c.length-1],e;for(var f in d.props)g.call(d.props,f)&&(e=d.props[f].step(d.props[f].value),w(a.element,f,e))}else{y(a.element,"hidden");for(var h=0;h<c.length-1;h++)if(b>=c[h].frame&&b<=c[h+1].frame){var i=c[h],j=c[h+1];for(var f in i.props)if(g.call(i.props,f))if(!g.call(j.props,f)){var e=i.props[f].step(i.props[f].value);w(a.element,f,e)}else{var k=(b-i.frame)/(j.frame-i.frame);k=i.props[f].easing(k);var e=i.props[f].step(i.props[f].value,j.props[f].value,k);w(a.element,f,e)}break}}},v.prototype._render=function(){var c=this;c.curTop=a.pageYOffset||b.documentElement.scrollTop||b.body.scrollTop||0;if(c.lastTop!==c.curTop){c.dir=c.curTop>=c.lastTop?"down":"up";var d=c.listeners.beforerender.call(c,{curTop:c.curTop,lastTop:c.lastTop,maxTop:c.maxKeyFrame,direction:c.dir});if(d!==!1){for(var e=0;e<c.skrollables.length;e++)c._calcSteps(c.skrollables[e],c.curTop);c.listeners.render.call(c)}c.lastTop=c.curTop}h(function(){c._render()})},v.prototype._parseProps=function(a){var b=this;for(var c=0;c<a.keyFrames.length;c++){var d=a.keyFrames[c],e=d.props.split(k),f,g,h;d.props={};for(var i=0;i<e.length-1;i+=2)f=e[i],g=e[i+1],h=f.match(l),h!==null?(f=h[1],h=h[2]):h="linear",g=b._parseProp(g),d.props[f]={value:g.value,step:g.step,easing:b.easings[h]}}},v.prototype._parseProp=function(a){switch(!1){case!(m=a.match(p)):return a=u.transform.parser(m),{value:a,step:u.transform.step};case!(m=a.match(q)):return a=u.color.parser(m),{value:a,step:u.color.step};case!(m=a.match(o)):return a=u.composedNumeric.parser(m),{value:a,step:u.composedNumeric.step};default:return{value:a,step:u.constant.step}}},v.prototype._fillProps=function(a){var b={};for(var c=0;c<a.keyFrames.length;c++)this._fillPropForFrame(a.keyFrames[c],b);b={};for(var c=a.keyFrames.length-1;c>=0;c--)this._fillPropForFrame(a.keyFrames[c],b)},v.prototype._fillPropForFrame=function(a,b){for(var c in b)g.call(a.props,c)||(a.props[c]=b[c]);for(var c in a.props)b[c]=a.props[c]};var w=function(a,b,c){var d=a.style;b==="opacity"&&(d.zoom=1,c>=1&&d.removeAttribute?d.removeAttribute("filter"):d.filter="alpha(opacity="+c*100+")"),b=b.replace(n,function(a,b){return b.toUpperCase()}).replace("-",""),d[b]=c,b=b.substr(0,1).toUpperCase()+b.substr(1);for(var e=0,f=["O","Moz","webkit","ms"];e<f.length;e++)d[f[e]+b]=c},x=function(a,b){z(a.className).indexOf(z(b))===-1&&(a.className=(a.className+" "+b).replace(i,"$1"))},y=function(a,b){a.className=z(a.className).replace(z(b),"").replace(i,"$1")},z=function(a){return" "+a+" "},A=function(a,b,c){return a/=60,c/=100,b=[c+=b*=(c<.5?c:1-c)/100,c-a%1*b*2,c-=b*=2,c,c+a%1*b,c+b],"#"+((256+b[~~a%6]*255<<8|b[(a|16)%6]*255)<<8|b[(a|8)%6]*255).toString(16).slice(1)},B=function(a,b,c){return"#"+((256+a<<8|b)<<8|c).toString(16).slice(1)};a.skrollr={init:function(a){return new v(a)},VERSION:"0.2.3"}})(window,document);